"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[3392],{9257:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(7294),o=n(1736),i="terminalWindow_wGrl",r="terminalWindowHeader_o9Cs",d="terminalWindowBody_tzdS",s="buttons_IGLB",l="dot_fGZE";function c(e){var t=e.children,n=e.minHeight,c="string"==typeof t?a.createElement(o.Z,null,t):t;return a.createElement("div",{className:i,style:{minHeight:n}},a.createElement("div",{className:r},a.createElement("div",{className:s},a.createElement("span",{className:l,style:{background:"#f25f58"}}),a.createElement("span",{className:l,style:{background:"#fbbe3c"}}),a.createElement("span",{className:l,style:{background:"#58cb42"}}))),a.createElement("div",{className:d},c))}},3441:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p}});var a=n(7462),o=n(3366),i=(n(7294),n(3905)),r=n(9257),d=["components"],s={sidebar_position:1},l="With Docker",c={unversionedId:"getting-started/demo/with-docker",id:"getting-started/demo/with-docker",title:"With Docker",description:"Our standard demo setup for demonstrating the Hydra Head protocol.",source:"@site/docs/getting-started/demo/with-docker.md",sourceDirName:"getting-started/demo",slug:"/getting-started/demo/with-docker",permalink:"/hydra-poc/docs/getting-started/demo/with-docker",editUrl:"https://github.com/input-output-hk/hydra-poc/tree/master/docs/docs/getting-started/demo/with-docker.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Demo",permalink:"/hydra-poc/docs/getting-started/demo/"},next:{title:"Without Docker",permalink:"/hydra-poc/docs/getting-started/demo/without-docker"}},m={},p=[{value:"Setting-up The Network",id:"setting-up-the-network",level:2},{value:"Seeding The Network",id:"seeding-the-network",level:2},{value:"Running The Clients",id:"running-the-clients",level:2}],h={toc:p};function u(e){var t=e.components,n=(0,o.Z)(e,d);return(0,i.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"with-docker"},"With Docker"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Our standard demo setup for demonstrating the Hydra Head protocol.")),(0,i.kt)("p",null,"The demo consists of"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a cluster of three Hydra nodes, directly connected to each other, each having access to one of three Hydra credentials ",(0,i.kt)("inlineCode",{parentName:"li"},"alice"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"bob")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"carol"),";"),(0,i.kt)("li",{parentName:"ul"},"a single Cardano node producing blocks which is used as a local devnet;"),(0,i.kt)("li",{parentName:"ul"},"a prometheus server gathering metrics;"),(0,i.kt)("li",{parentName:"ul"},"ad-hoc terminal user-interface clients to interact with the individual Hydra nodes;")),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"As we are using a ad-hoc private devnets which start from the genesis block, you need to ensure the devnet configuration is reasonably up-to-date. If you get ",(0,i.kt)("inlineCode",{parentName:"p"},"LedgerNoView")," errors from the Cardano node, that means the start times are too far in the past and you should update them e.g. using the ",(0,i.kt)("inlineCode",{parentName:"p"},"prepare-devnet.sh")," script."))),(0,i.kt)("h2",{id:"setting-up-the-network"},"Setting-up The Network"),(0,i.kt)("p",null,"We'll be using ",(0,i.kt)("a",{parentName:"p",href:"https://www.docker.com/get-started"},"docker")," and ",(0,i.kt)("a",{parentName:"p",href:"https://www.docker.com/get-started"},"compose")," to get the demo running so make sure you have them in scope or, jump right away to ",(0,i.kt)("a",{parentName:"p",href:"/docs/getting-started/demo/without-docker"},"Running The Demo: Without Docker")," if you feel like doing it the hard way."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Context")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"All commands below are written as if executed from the ",(0,i.kt)("inlineCode",{parentName:"p"},"demo")," folder in the project repository, so make sure to clone the repository and ",(0,i.kt)("inlineCode",{parentName:"p"},"cd demo")," before anything."))),(0,i.kt)("p",null,"To get started, let's pull the necessary images for services defined in the compose file:"),(0,i.kt)(r.Z,{mdxType:"TerminalWindow"},"docker-compose pull"),(0,i.kt)("p",null,"From there, we can run the ",(0,i.kt)("inlineCode",{parentName:"p"},"./prepare-devnet.sh")," script to creates an initial configuration for our development network. This creates genesis files needed to bootstrap a Cardano blockchain. Note that for the demo, we use a simple variant of Cardano which requires no stake pools whatsoever. "),(0,i.kt)(r.Z,{mdxType:"TerminalWindow"},"./prepare-devnet.sh"),(0,i.kt)("p",null,"That's all for the preliminaries, we can now bring the network up with:"),(0,i.kt)(r.Z,{mdxType:"TerminalWindow"},"docker-compose up -d"),(0,i.kt)("p",null,"For convenience, we also provide a script ",(0,i.kt)("inlineCode",{parentName:"p"},"./run-docker.sh")," which combines steps above. It also performs few sanity checks to avoid tripping oneself.  "),(0,i.kt)("h2",{id:"seeding-the-network"},"Seeding The Network"),(0,i.kt)("p",null,'In the current stage of development, Hydra nodes need a specially crafted set of UTxO to drive the Head protocol ("fuel") and of course some UTxO to be committed to the head.\nThe included script ',(0,i.kt)("inlineCode",{parentName:"p"},"./seed-devnet.sh")," uses the ",(0,i.kt)("inlineCode",{parentName:"p"},"cardano-cli")," in the already running ",(0,i.kt)("inlineCode",{parentName:"p"},"cardano-node")," container to give Alice, Bob and Carol some UTxO entries to commit and some fuel UTxO."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"There is nothing special about those transactions so one could any other Cardano client to create those transactions. Yet, they must have the following characteristics:\nmust pay outputs to commit to the key that's used by the Hydra Node's internal wallet, as defined by argument ",(0,i.kt)("inlineCode",{parentName:"p"},"--cardano-signing-key")," of hydra-node executable,\nOne of the outputs must include datum hash ",(0,i.kt)("inlineCode",{parentName:"p"},"a654fb60d21c1fed48db2c320aa6df9737ec0204c0ba53b9b94a09fb40e757f3"),' as this is our "fuel" marker.'))),(0,i.kt)("h2",{id:"running-the-clients"},"Running The Clients"),(0,i.kt)("p",null,"Using compose, you can start the demo Terminal-based User Interface (a.k.a. ",(0,i.kt)("inlineCode",{parentName:"p"},"hydra-tui"),") to interact with Hydra nodes. There are 3 preconfigured TUIs services in the compose definition: ",(0,i.kt)("inlineCode",{parentName:"p"},"hydra-tui-1"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"hydra-tui-2")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"hydra-tui-3"),". To connect to the first Hydra node in a terminal, run the following commands:"),(0,i.kt)(r.Z,{mdxType:"TerminalWindow"},"docker-compose --profile tui run hydra-tui-1"),(0,i.kt)("p",null,"This will start a full-blown terminal interface loaded with signing keys corresponding to the first Hydra node. In other terminals, you can start other nodes in a similar fashion targeting ",(0,i.kt)("inlineCode",{parentName:"p"},"hydra-tui-2")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"hydra-tui-3")," services."))}u.isMDXComponent=!0}}]);