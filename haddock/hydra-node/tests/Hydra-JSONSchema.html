<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hydra.JSONSchema</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">tests</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Hydra.JSONSchema</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:prop_validateToJSON">prop_validateToJSON</a> :: <span class="keyword">forall</span> a. (<a href="file:///nix/store/70nb3rwppyxa79i8r3k8qc3h7gb2qwfp-aeson-lib-aeson-1.5.6.0-haddock-doc/share/doc/aeson/html/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="file:///nix/store/z28k0p2wa7nd80q9clvx78n150br6vg1-QuickCheck-lib-QuickCheck-2.14.2-haddock-doc/share/doc/QuickCheck/html/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> a, <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> a) =&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="file:///nix/store/0m2ahmmjp1nvwlnv3x0jn0d3189ccp4z-foldl-lib-foldl-1.4.12-haddock-doc/share/doc/foldl/html/Control-Foldl-Text.html#t:Text" title="Control.Foldl.Text">Text</a> -&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="file:///nix/store/z28k0p2wa7nd80q9clvx78n150br6vg1-QuickCheck-lib-QuickCheck-2.14.2-haddock-doc/share/doc/QuickCheck/html/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></li><li class="src short"><a href="#v:prop_specIsComplete">prop_specIsComplete</a> :: <span class="keyword">forall</span> a. (<a href="file:///nix/store/z28k0p2wa7nd80q9clvx78n150br6vg1-QuickCheck-lib-QuickCheck-2.14.2-haddock-doc/share/doc/QuickCheck/html/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> a, <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> a) =&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Hydra-JSONSchema.html#t:SpecificationSelector" title="Hydra.JSONSchema">SpecificationSelector</a> -&gt; <a href="file:///nix/store/z28k0p2wa7nd80q9clvx78n150br6vg1-QuickCheck-lib-QuickCheck-2.14.2-haddock-doc/share/doc/QuickCheck/html/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:SpecificationSelector">SpecificationSelector</a> = <a href="file:///nix/store/3nszfmnkpz2alb27da15qwb79pnkyy8m-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/Control-Lens-Type.html#t:Traversal-39-" title="Control.Lens.Type">Traversal'</a> <a href="file:///nix/store/70nb3rwppyxa79i8r3k8qc3h7gb2qwfp-aeson-lib-aeson-1.5.6.0-haddock-doc/share/doc/aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="file:///nix/store/70nb3rwppyxa79i8r3k8qc3h7gb2qwfp-aeson-lib-aeson-1.5.6.0-haddock-doc/share/doc/aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:withJsonSpecifications">withJsonSpecifications</a> :: (<a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:ensureSystemRequirements">ensureSystemRequirements</a> :: <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:prop_validateToJSON" class="def">prop_validateToJSON</a> :: <span class="keyword">forall</span> a. (<a href="file:///nix/store/70nb3rwppyxa79i8r3k8qc3h7gb2qwfp-aeson-lib-aeson-1.5.6.0-haddock-doc/share/doc/aeson/html/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="file:///nix/store/z28k0p2wa7nd80q9clvx78n150br6vg1-QuickCheck-lib-QuickCheck-2.14.2-haddock-doc/share/doc/QuickCheck/html/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> a, <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> a) =&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="file:///nix/store/0m2ahmmjp1nvwlnv3x0jn0d3189ccp4z-foldl-lib-foldl-1.4.12-haddock-doc/share/doc/foldl/html/Control-Foldl-Text.html#t:Text" title="Control.Foldl.Text">Text</a> -&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="file:///nix/store/z28k0p2wa7nd80q9clvx78n150br6vg1-QuickCheck-lib-QuickCheck-2.14.2-haddock-doc/share/doc/QuickCheck/html/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a> <a href="#v:prop_validateToJSON" class="selflink">#</a></p><div class="doc"><p>Generate arbitrary serializable (JSON) value, and check their validity
 against a known JSON schema.
 This property ensures that JSON instances we produce abide by
 the specification. Note this, because this uses an external tool each
 property iteration is pretty slow. So instead, we run the property only
 once, but on a list of 100 elements all arbitrarily generated.</p></div></div><div class="top"><p class="src"><a id="v:prop_specIsComplete" class="def">prop_specIsComplete</a> :: <span class="keyword">forall</span> a. (<a href="file:///nix/store/z28k0p2wa7nd80q9clvx78n150br6vg1-QuickCheck-lib-QuickCheck-2.14.2-haddock-doc/share/doc/QuickCheck/html/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> a, <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> a) =&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Hydra-JSONSchema.html#t:SpecificationSelector" title="Hydra.JSONSchema">SpecificationSelector</a> -&gt; <a href="file:///nix/store/z28k0p2wa7nd80q9clvx78n150br6vg1-QuickCheck-lib-QuickCheck-2.14.2-haddock-doc/share/doc/QuickCheck/html/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a> <a href="#v:prop_specIsComplete" class="selflink">#</a></p><div class="doc"><p>Check specification is complete wr.t. to generated data
 This second sub-property ensures that any key found in the
 specification corresponds to a constructor in the corresponding
 data-type. This makes sure the document is kept in sync and make sure we don't
 left behind constructors which no longer exists.</p><p>The second argument is a lens that says which part of the
 specification to select to check completeness of the specification w.r.t.
 constructors for the datatype, for example:</p><p>@<code>
 key &quot;properties&quot; . key &quot;message&quot;
 </code>@</p><p>which selects the list of elements under <code>properties &gt; message</code> path
 in the specification file. This element should be a schema fragment that has
 a property <code>oneOf</code> containing a list of objects having a <code>title</code> property.</p><p>Given the above selector, this schema fragment is fine:</p><p>@<code>
 properties:
  message:
    oneOf:
      - title: APIServer
        type: object
  ...
 </code>@</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SpecificationSelector" class="def">SpecificationSelector</a> = <a href="file:///nix/store/3nszfmnkpz2alb27da15qwb79pnkyy8m-lens-lib-lens-4.19.2-haddock-doc/share/doc/lens/html/Control-Lens-Type.html#t:Traversal-39-" title="Control.Lens.Type">Traversal'</a> <a href="file:///nix/store/70nb3rwppyxa79i8r3k8qc3h7gb2qwfp-aeson-lib-aeson-1.5.6.0-haddock-doc/share/doc/aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="file:///nix/store/70nb3rwppyxa79i8r3k8qc3h7gb2qwfp-aeson-lib-aeson-1.5.6.0-haddock-doc/share/doc/aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="#t:SpecificationSelector" class="selflink">#</a></p><div class="doc"><p>An alias for a traversal selecting some part of a <code>Value</code>
 This alleviates the need for users of this module to import explicitly the types
 from aeson and lens.</p></div></div><div class="top"><p class="src"><a id="v:withJsonSpecifications" class="def">withJsonSpecifications</a> :: (<a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="#v:withJsonSpecifications" class="selflink">#</a></p><div class="doc"><p>Prepare the environment (temp directory) with the JSON specifications. We
 maintain a YAML version of a JSON-schema, for it is more convenient to write.
 But tools (and in particular jsonschema) only works from JSON, so this
 function makes sure to also convert our local yaml into JSON.</p></div></div><div class="top"><p class="src"><a id="v:ensureSystemRequirements" class="def">ensureSystemRequirements</a> :: <a href="file:///nix/store/k7x5pk0xwypn8m54076csq9c1sy75ahv-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="#v:ensureSystemRequirements" class="selflink">#</a></p><div class="doc"><p>Make sure that the required python library is available on the system.
 Mark a test as pending when not available.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>